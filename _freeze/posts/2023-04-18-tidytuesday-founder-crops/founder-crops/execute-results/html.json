{
  "hash": "0535ac30357a45bd8d0210c71c6a4116",
  "result": {
    "markdown": "---\ntitle: \"TidyTuesday Week 16: Neolithic Founder Crops\"\ndescription: \"TidyTuesday: Exploring early agriculture in SW Asia\"\ntwitter-card:\n  image: \"thumbnail.png\"\nauthor:\n  - name: Louise E. Sinks\n    url: https://lsinks.github.io/\ndate: 04-18-2023\ncategories: [R, TidyTuesday, R-code, Code-Along, Data-Viz] # self-defined categories\ncitation:\n  url: https://lsinks.github.io/posts/2023-04-18-tidytuesday-founder-crops/founder-crops \nimage: \"thumbnail.png\"\ndraft: false # setting this to `true` will prevent your post from appearing on your listing page until you're ready!\n---\n\n\nToday's TidyTuesday relates to the use of plants in the Neolithic era and is based on [a paper by Arranz-Otaegul and Roe](https://link.springer.com/article/10.1007/s00334-023-00917-1).\n\nThe authors have made [their data and analysis available on GitHub](https://github.com/joeroe/SWAsiaNeolithicFounderCrops). The methods for generating all the figures and tables are in an RMarkdown document with some explanatory text. Having just recently looked at the code and data for one of my older papers, I now appreciate this markdown approach. Everything needed is linked together through the markdown document and the GitHub repo. My code is only as understandable with the paper notebook that resides in my former lab. Even though the code was commented, it is less clear many years later. I find markdown/ quarto a little difficult to code in. I'm not sure why- maybe the interspersed text and code is distracting. I usually code in R files for more complicated projects and then copy them into markdown/quarto. But I definitely appreciate markdown after working on today's project.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(skimr)\nlibrary(tidyverse)\nlibrary(ggthemes)\nlibrary(gt)\n```\n:::\n\n\nThe data can be downloaded through the tidytuesday package using `tuesdata <- tidytuesdayR::tt_load(2023, week = 16)`. Or the data and the code can be downloaded from the [project's Github repo](https://github.com/joeroe/SWAsiaNeolithicFounderCrops). I actually don't use the data from tidytuesday, but instead work off their analysis.\n\nTo briefly summarize the work of Arranz-Otaegul and Roe, in the 1980s the concept of \"founder crops\" was proposed. These founder crops were a set of crops that were generally all cultivated together and were wide spread as the first main agricultural crops. Arranz-Otaegul and Roe propose that with the increased data generated since the 80s, a more refined approach to the beginnings of argriculture can be taken. They break down agriculture into several different processes (selection of plants, domesitcation, plant management, etc.) which occurs over longer periods of time rather than the development agriculture occuring as a single, rapid event. Arranz-Otaegul and Roe examine the plant remains reported from 135 sites over a wide range of periods in the neolithic era. They find that founder crops don't necessarily come as a \"package\", that a variety of other plants were fairly important, and that the increased cultivation of wheat was the dominate change in the types plants used during the neolithic period. I should note, I'm a chemist, not an archeology/ archeobotanist, so this is not the most nuanced summary of their work.\n\nI was particularly intrigued by their conclusion about wheat, which is graphically represented in [Figure 4 of their paper](https://github.com/joeroe/SWAsiaNeolithicFounderCrops/blob/main/analysis/figures/fig4.png). I found the figure a bit unclear; stacked area plots are not common in chemistry and I'm not expert at reading them. Wheat certainly does increase with time, but it was hard for me to tell what the other crops were doing. So, for tidytuesday, I wanted to explore this specific question- how does the use of wheat change over time.\n\nThe file you get from the tidytuesday package is the same as the \"swasia_neolithic_flora.tsv\" from the paper's repo with some minor clean-up. I don't want to replicate all there analysis here to get to the point of being able to make the figure I want, so I saved the object flora_ts after it was generated in line 256 of their SI1.RMD file. This has the data partitioned by century and has been reshaped.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nflora_ts <- read_rds(\"flora_ts.rds\")\n```\n:::\n\n\nThere are 8 founder crops. The original analysis binned together wheat varieties and I am also binning all the legumes together, just to make the resulting graph less busy. I'm also dropping flax. This code chunk is modified from their code chunk `ts-founder-crops`, which starts at line 573 and ends with saving figure 4. This chunk calculates the proportion of archaeological sites at which the crop was found at in each century. (This is called an assemblage in the paper.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfounder_crops_binned <- flora_ts %>%\n  # aggregate the legumes and the wheat\n  mutate(founder_crop = recode(founder_crop,\n                               \"einkorn wheat\" = \"wheat\",\n                               \"emmer wheat\" = \"wheat\",\n                               \"chickpea\" = \"legumes\",\n                               \"bitter vetch\" = \"legumes\",\n                               \"lentil\" = \"legumes\",\n                               \"pea\" = \"legumes\",\n                               \"flax\" = \"flax\",\n                               .default = founder_crop)) %>%\n  filter(founder_crop != \"flax\") %>%\n  # Aggregate by founder crops\n  group_by(century, site_name, phase_code, founder_crop) %>%\n  summarise(prop = sum(prop, na.rm = TRUE), .groups = \"drop\") %>%\n  # Add number of assemblages per century\n  group_by(century) %>%\n  mutate(n_assemb = length(unique(phase_code))) %>%\n  # Calculate average proportion\n  group_by(century, founder_crop) %>%\n  summarise(avg_prop = sum(prop) / first(n_assemb))\n```\n:::\n\n\nDrop the NAs. This corresponds to all the plants which are not founder crops.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfounder_crops_only <- founder_crops_binned %>%\n  drop_na(founder_crop)\n```\n:::\n\n\nFirst, I wanted to see roughly how common each crop was over all time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfounder_crops_only %>%\n  group_by(founder_crop) %>%\n  summarize(pct = round(mean(avg_prop), 2) * 100) %>%\n  gt() %>%\n  cols_label(founder_crop = \"Founder Crop\", pct = \"% of Sites\") %>%\n  opt_stylize(style = 6, color = \"blue\", add_row_striping = TRUE) %>%\n  tab_header(title = \"Mean Frequency of Crops over Time\") \n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"kznrymfkuh\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#kznrymfkuh table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#kznrymfkuh thead, #kznrymfkuh tbody, #kznrymfkuh tfoot, #kznrymfkuh tr, #kznrymfkuh td, #kznrymfkuh th {\n  border-style: none;\n}\n\n#kznrymfkuh p {\n  margin: 0;\n  padding: 0;\n}\n\n#kznrymfkuh .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #5F5F5F;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #5F5F5F;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#kznrymfkuh .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#kznrymfkuh .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#kznrymfkuh .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#kznrymfkuh .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kznrymfkuh .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #5F5F5F;\n}\n\n#kznrymfkuh .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #5F5F5F;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #5F5F5F;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#kznrymfkuh .gt_col_heading {\n  color: #FFFFFF;\n  background-color: #0076BA;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#kznrymfkuh .gt_column_spanner_outer {\n  color: #FFFFFF;\n  background-color: #0076BA;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#kznrymfkuh .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#kznrymfkuh .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#kznrymfkuh .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #5F5F5F;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#kznrymfkuh .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#kznrymfkuh .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #5F5F5F;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #5F5F5F;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#kznrymfkuh .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #5F5F5F;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #5F5F5F;\n  vertical-align: middle;\n}\n\n#kznrymfkuh .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#kznrymfkuh .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#kznrymfkuh .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: none;\n  border-top-width: 1px;\n  border-top-color: #D5D5D5;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D5D5D5;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D5D5D5;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#kznrymfkuh .gt_stub {\n  color: #333333;\n  background-color: #89D3FE;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D5D5D5;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kznrymfkuh .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#kznrymfkuh .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#kznrymfkuh .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#kznrymfkuh .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kznrymfkuh .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #5F5F5F;\n}\n\n#kznrymfkuh .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#kznrymfkuh .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #5F5F5F;\n}\n\n#kznrymfkuh .gt_grand_summary_row {\n  color: #333333;\n  background-color: #D5D5D5;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kznrymfkuh .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #5F5F5F;\n}\n\n#kznrymfkuh .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #5F5F5F;\n}\n\n#kznrymfkuh .gt_striped {\n  background-color: #EDF7FC;\n}\n\n#kznrymfkuh .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #5F5F5F;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #5F5F5F;\n}\n\n#kznrymfkuh .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kznrymfkuh .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kznrymfkuh .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#kznrymfkuh .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#kznrymfkuh .gt_left {\n  text-align: left;\n}\n\n#kznrymfkuh .gt_center {\n  text-align: center;\n}\n\n#kznrymfkuh .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#kznrymfkuh .gt_font_normal {\n  font-weight: normal;\n}\n\n#kznrymfkuh .gt_font_bold {\n  font-weight: bold;\n}\n\n#kznrymfkuh .gt_font_italic {\n  font-style: italic;\n}\n\n#kznrymfkuh .gt_super {\n  font-size: 65%;\n}\n\n#kznrymfkuh .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#kznrymfkuh .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#kznrymfkuh .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#kznrymfkuh .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#kznrymfkuh .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#kznrymfkuh .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#kznrymfkuh .gt_indent_5 {\n  text-indent: 25px;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"2\" class=\"gt_heading gt_title gt_font_normal gt_bottom_border\" style>Mean Frequency of Crops over Time</td>\n    </tr>\n    \n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Founder Crop\">Founder Crop</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"% of Sites\">% of Sites</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"founder_crop\" class=\"gt_row gt_left\">barley</td>\n<td headers=\"pct\" class=\"gt_row gt_right\">9</td></tr>\n    <tr><td headers=\"founder_crop\" class=\"gt_row gt_left gt_striped\">legumes</td>\n<td headers=\"pct\" class=\"gt_row gt_right gt_striped\">6</td></tr>\n    <tr><td headers=\"founder_crop\" class=\"gt_row gt_left\">wheat</td>\n<td headers=\"pct\" class=\"gt_row gt_right\">15</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\n\nNow, I'm going to create a scatter plot with a trendline as a guide for the eyes. I'm using facet wrap, so each crop is on its own plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfounder_crops_only  %>% ggplot(aes(century / 1000, avg_prop, color = founder_crop)) +\n  geom_point() +\n  geom_smooth() +\n  facet_wrap(~ founder_crop, nrow = 3) +\n  scale_x_reverse(\n    breaks = scales::breaks_width(-1),\n    limits = c(11.7, 6.5),\n    expand = expansion(0)\n  ) +\n  scale_y_continuous(\n    limits = c(0, 0.3),\n    breaks = scales::breaks_width(0.1),\n    labels = scales::label_percent(accuracy = 1),\n    expand = expansion(mult = c(0, 0.05))\n  ) +\n  theme_pander() +\n  theme(legend.position = \"none\") +\n  labs(x = \"ka cal BP\", y = \"Mean proportion of assemblages\", fill = NULL) %>%\n  labs(title = \"Frequency of Crops in SW Asia during the Neolithic Period\", caption = \"data from https://github.com/joeroe/SWAsiaNeolithicFounderCrops\")\n```\n\n::: {.cell-output-display}\n![](founder-crops_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\nSo, it looks like barley and legumes are fairly constant with time, but wheat does increase consistently. A note about the x-axis- the times are listed as before present (BP), so a larger number is longer ago. [Present is defined as January 1, 1950](https://en.wikipedia.org/wiki/Before_Present).\n",
    "supporting": [
      "founder-crops_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}